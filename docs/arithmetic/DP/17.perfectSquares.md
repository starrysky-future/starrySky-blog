---
tag:
  - 动态规划
categories:
  - 算法
recommend: 17
---

# 17.完全平方数

[力扣题目链接](https://leetcode.cn/problems/perfect-squares/)

## 题目

给你一个整数 `n` ，返回 _和为 `n` 的完全平方数的最少数量_ 。

**完全平方数** 是一个整数，其值等于另一个整数的平方；换句话说，其值等于一个整数自乘的积。例如，`1`、`4`、`9` 和 `16` 都是完全平方数，而 `3` 和 `11` 不是。

**示例 1：**

```
输入：n = 12
输出：3
解释：12 = 4 + 4 + 4
```

**示例 2：**

```
输入：n = 13
输出：2
解释：13 = 4 + 9
```

**提示：**

- `1 <= n <= 104`

## 思路

**完全平方数就是物品（可以无限件使用），凑个正整数 n 就是背包，问凑满这个背包最少有多少物品？**

### 1.确定 dp 数组以及下标的含义

dp[i]：和为 i 的完全平方数的最少数量为 dp[i]

### 2.确定递推公式

dp[i]可以由 dp[i - j\*j]推出，取 dp[i]和 dp[i - j\*j]+1 之间的最小值

```js
dp[i] = Math.min(dp[i], dp[i - j * j] + 1);
```

### 3.dp 数组如何初始化

根据递推公式 dp[1] = Math.min(dp[1],dp[0]+1)，1 的完全平方数的最少数量为 1，所以 dp[0]=0

### 4.确定遍历顺序

完全背包

**如果求组合数就是外层 for 循环遍历物品，内层 for 遍历背包。**

**如果求排列数就是外层 for 遍历背包，内层 for 循环遍历物品。**

本题求的是最小数，所以哪种顺序都可以，这里选择外层遍历背包，内层遍历物品。

```js
for (let i = 1; i <= n; i++) {
  for (let j = 1; j * j <= i; j++) {
    dp[i] = Math.min(dp[i], dp[i - j * j] + 1);
  }
}
```

### 5.举例推导 dp 数组

输入 n 为 5 例

| 下标  | 0   | 1   | 2   | 3   | 4   | 5   |
| ----- | --- | --- | --- | --- | --- | --- |
| dp[i] | 0   | 1   | 2   | 3   | 1   | 2   |

## 代码

```js
var numSquares = function (n) {
  const INIT_DATA = n + 1;
  const dp = new Array(INIT_DATA).fill(INIT_DATA);

  dp[0] = 0;
  for (let i = 1; i <= n; i++) {
    for (let j = 1; j * j <= i; j++) {
      dp[i] = Math.min(dp[i], dp[i - j * j] + 1);
    }
  }

  return dp[n];
};
```

- 时间复杂度：O(n × m )
- 空间复杂度：O(n)
